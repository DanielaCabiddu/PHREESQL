name: windows-build

on: [push]

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Checkout repository and submodules
        uses: actions/checkout@v2
        with:
          submodules: recursive
      - name: dependencies
        run: |
          choco install sqlite
      - name: Set up Visual Studio shell
        uses: egor-tensin/vs-shell@v2
        with:
          arch: x64
      - name : link Sqlite3
        run: |
          cd C:/ProgramData/chocolatey/lib/SQLite/tools
          lib /def:sqlite3.def
      - name: build
        shell: bash
        run: |
          ls C:/ProgramData/chocolatey/lib/SQLite/tools
          echo "===="
          ls C:/ProgramData/chocolatey/lib/SQLite/tools
          echo "./build.sh"
      - name: test
        shell: bash
        run: |
          echo "./test.sh"
